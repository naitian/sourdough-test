<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>How to Use Sourdough and Google Docs</title><link rel="stylesheet" href="base.c1b2e3a5.css" type="text/css" charset="utf-8"><script src="js.c8214ea0.js" charset="utf-8"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-168080597-1"></script><script>function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","UA-168080597-1");</script></head><body> <header> <a href="https://michigandaily.com"> <img class="header__logo" src="logo.f0e62d31.png" alt="The Michigan Daily"> </a> </header> <article> <h1>How to Use Sourdough and Google Docs</h1> <div class="by"> <span class="author">Naitian Zhou</span> <span class="author">Parth Dhyani</span> <span class="author">Alex Cotignola</span> / Daily Data Team </div> <h2>What is Sourdough?</h2> <p>Sourdough is the <em>starter</em> (get it??) template for Daily data visualization stories. It comes with a couple of nice features.</p> <ul> <li>Style with SCSS</li> <li>ES6 compiled, bundled, and minified with Parcel</li> <li>MicroCMS with Google Docs and ArchieML (view the one for <a href="https://docs.google.com/document/d/1b1G4vXtHYZqwB8Ofky7szg6_kItoxZKIEob-DBcrDH0/edit#">this document</a>)</li> </ul> <p>In the future, it’ll also have bore bundled in along with it (but we’ll have to write bore first).</p> <p>It’s important to know also what Sourdough is <b>not</b>. Sourdough is not a starter template for web apps. It is restricted right now only to single page, article-style content. If you need an SPA or something similar, it should be easy to <em>modify</em> Sourdough to serve that role, but it’s not what we made it for.</p> <h2>Setting Up</h2> <p>First, to activate Sourdough on Google Drive, you’ll need to share your Google Doc with the Sourdough service account. To do so, just add <a href="mailto:sourdough@daily-sourdough.iam.gserviceaccount.com">sourdough@daily-sourdough.iam.gserviceaccount.com</a> as an editor, commenter, or viewer to the document.</p> <p>Then, clone the Sourdough starter repository into a directory for your new project. You should run <b>make init</b> to initialize the project. This will do a few things.</p> <ol> <li>Replaces the Sourdough git repository with a fresh one.</li> <li>That’s it for now, but this is a useful hook for setting up config files, etc in the future.</li> <li>Install the necessary npm dependencies.</li> </ol> <p>Now, open <b>config.json</b> and make edit the <em>archie.gdoc</em> field to be the correct ID. You can find the ID in the Google Doc URL: <em>https://docs.google.com/document/d/</em><em><b>{...id}</b></em><em>/edit#</em></p> <p><em></em></p> <p>Finally, ask Naitian (or another data team member) for the <b>auth.json</b> file, and place it in the project directory.</p> <h2>Using Sourdough</h2> <h3>Where do I write code?</h3> <p>Feel free to edit anything in<b> src/</b> <em>except</em> <b>src/index.html</b>. That is automatically generated by <b>scripts/render.js</b>.</p> <p>If you need to edit the markup (useful for more complex, custom pages), you should edit the <a href="https://mozilla.github.io/nunjucks/getting-started.html">Nunjucks</a> template in <b>template/index.html</b>.</p> <p>You should put your raw data in <b>src/raw_data/</b> and write preprocessing scripts in <b>scripts/</b> that output preprocessed data into <b>src/data/</b>. You should almost always preprocess to make the dataset smaller, because that’s what we’ll be serving to users, so we want to minimize the page load time (and also the size of the magnify repo).</p> <h3>How do I use ArchieML?</h3> <p><a href="http://archieml.org/">Here</a> is the documentation for ArchieML. Sourdough has default mappings between specific freeform types and HTML. All of these are Capitalized (this is important because AML is case-sensitive!) Also don’t bold or italicize these types.</p> <ul> <li><em>Section </em>and <em>Subsection</em> insert H2 and H3 tags, respectively.</li> <li><em>Figure</em> inserts a figure element. Its value is an object that has keys: <em>Title, Name, Caption, [.By]</em></li> <li><em>Image </em>inserts an image. It can either have a string value with the <em>Url</em>, or an object with key <em>Url</em></li> <li><em>List </em>or <em>UList</em> inserts an unordered list. It’s an Archie array.</li> <li><em>OList</em> inserts an ordered list.</li> <li><em>DataDescription</em> inserts a data description box. It should have a string value.</li> </ul> <p>To pull the most up-to-date Google Doc, just run <b>make fetch</b>.</p> <h3>Pushing to Prod</h3> <p>There’s no great way to do this right now. You can build the production version by running <b>make build-prod</b>. The production site is now in your <b>dist/</b> folder. Copy that over to the magnify repo.</p> <footer> <span class="social__blurb">Like this piece? Share it with your friends.</span> <span class="social__buttons"> <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-via="michigandaily" data-show-count="false">Tweet</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> <iframe src="https://www.facebook.com/plugins/share_button.php?href=https://magnify.michigandaily.us/sourdough&layout=button_count&size=small&appId=725032674263883&width=96&height=20" width="96" height="20" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowTransparency="true" allow="encrypted-media"></iframe> </span> </footer> </article>
</body></html>